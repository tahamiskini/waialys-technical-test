{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/abbes/Desktop/ADN_Experise_Technical_Interview/waialys-technical-test-harry-potter/src/components/ui/accordion.tsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const Accordion = registerClientReference(\n    function() { throw new Error(\"Attempted to call Accordion() from the server but Accordion is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/accordion.tsx <module evaluation>\",\n    \"Accordion\",\n);\nexport const AccordionContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call AccordionContent() from the server but AccordionContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/accordion.tsx <module evaluation>\",\n    \"AccordionContent\",\n);\nexport const AccordionItem = registerClientReference(\n    function() { throw new Error(\"Attempted to call AccordionItem() from the server but AccordionItem is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/accordion.tsx <module evaluation>\",\n    \"AccordionItem\",\n);\nexport const AccordionTrigger = registerClientReference(\n    function() { throw new Error(\"Attempted to call AccordionTrigger() from the server but AccordionTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/accordion.tsx <module evaluation>\",\n    \"AccordionTrigger\",\n);\n"],"names":[],"mappings":";;;;;;AAAA;;AACO,MAAM,YAAY,CAAA,GAAA,oXAAA,CAAA,0BAAuB,AAAD,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,iEACA;AAEG,MAAM,mBAAmB,CAAA,GAAA,oXAAA,CAAA,0BAAuB,AAAD,EAClD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,iEACA;AAEG,MAAM,gBAAgB,CAAA,GAAA,oXAAA,CAAA,0BAAuB,AAAD,EAC/C;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,iEACA;AAEG,MAAM,mBAAmB,CAAA,GAAA,oXAAA,CAAA,0BAAuB,AAAD,EAClD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,iEACA"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/abbes/Desktop/ADN_Experise_Technical_Interview/waialys-technical-test-harry-potter/src/components/ui/accordion.tsx/proxy.js"],"sourcesContent":["import { registerClientReference } from \"react-server-dom-turbopack/server.edge\";\nexport const Accordion = registerClientReference(\n    function() { throw new Error(\"Attempted to call Accordion() from the server but Accordion is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/accordion.tsx\",\n    \"Accordion\",\n);\nexport const AccordionContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call AccordionContent() from the server but AccordionContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/accordion.tsx\",\n    \"AccordionContent\",\n);\nexport const AccordionItem = registerClientReference(\n    function() { throw new Error(\"Attempted to call AccordionItem() from the server but AccordionItem is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/accordion.tsx\",\n    \"AccordionItem\",\n);\nexport const AccordionTrigger = registerClientReference(\n    function() { throw new Error(\"Attempted to call AccordionTrigger() from the server but AccordionTrigger is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/components/ui/accordion.tsx\",\n    \"AccordionTrigger\",\n);\n"],"names":[],"mappings":";;;;;;AAAA;;AACO,MAAM,YAAY,CAAA,GAAA,oXAAA,CAAA,0BAAuB,AAAD,EAC3C;IAAa,MAAM,IAAI,MAAM;AAAkO,GAC/P,6CACA;AAEG,MAAM,mBAAmB,CAAA,GAAA,oXAAA,CAAA,0BAAuB,AAAD,EAClD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,6CACA;AAEG,MAAM,gBAAgB,CAAA,GAAA,oXAAA,CAAA,0BAAuB,AAAD,EAC/C;IAAa,MAAM,IAAI,MAAM;AAA0O,GACvQ,6CACA;AAEG,MAAM,mBAAmB,CAAA,GAAA,oXAAA,CAAA,0BAAuB,AAAD,EAClD;IAAa,MAAM,IAAI,MAAM;AAAgP,GAC7Q,6CACA"}},
    {"offset": {"line": 53, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 63, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/abbes/Desktop/ADN_Experise_Technical_Interview/waialys-technical-test-harry-potter/src/consts/index.ts"],"sourcesContent":["export const BASE_PATH = \"https://api.potterdb.com/v1\";\n"],"names":[],"mappings":";;;AAAO,MAAM,YAAY"}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/abbes/Desktop/ADN_Experise_Technical_Interview/waialys-technical-test-harry-potter/src/app/models/bookDetails.ts"],"sourcesContent":["import axios from 'axios';\r\nimport { BASE_PATH } from '@/consts';\r\n\r\n// Chapter model reflecting only necessary attributes\r\nexport interface Chapter {\r\n  id: string;\r\n  type: string;\r\n  attributes: {\r\n    title: string;\r\n    slug: string;\r\n    order: number;\r\n    summary?: string;  // Summary is optional\r\n  };\r\n  relationships: {\r\n    book: {\r\n      data: {\r\n        id: string;\r\n        type: string;\r\n      };\r\n    };\r\n  };\r\n}\r\n\r\n// Book details model including an optional list of chapters\r\nexport interface BookDetails {\r\n  id: string;\r\n  type: string;\r\n  attributes: {\r\n    title: string;\r\n    author: string;\r\n    cover: string;\r\n    pages: number;\r\n    release_date: string;\r\n    summary: string;\r\n  };\r\n  chapters?: Chapter[]; // Chapters are optional here, they will be fetched separately\r\n}\r\n\r\nexport interface ApiResponse<T> {\r\n  data: T;\r\n}\r\n\r\n// Fetch book details along with chapters\r\nexport const fetchBookDetails = async (id: string): Promise<BookDetails | null> => {\r\n  try {\r\n    // Fetch the book details\r\n    const bookResponse = await axios.get<ApiResponse<BookDetails>>(`${BASE_PATH}/books/${id}`);\r\n    const bookDetails = bookResponse.data.data;\r\n\r\n    // Fetch the chapters for the book\r\n    const chaptersResponse = await axios.get<ApiResponse<Chapter[]>>(`${BASE_PATH}/books/${id}/chapters`);\r\n    const chapters = chaptersResponse.data.data;\r\n\r\n    // Combine the book details with chapters\r\n    return { ...bookDetails, chapters };\r\n  } catch (error) {\r\n    console.error('Error fetching book details:', error);\r\n    return null;\r\n  }\r\n};\r\n\r\n// Fetch a specific chapter for a given book\r\nexport const fetchChapterContent = async (bookId: string, chapterId: string): Promise<Chapter | null> => {\r\n  try {\r\n    // Fetch the specific chapter for the book\r\n    const chapterResponse = await axios.get<ApiResponse<Chapter>>(`${BASE_PATH}/books/${bookId}/chapters/${chapterId}`);\r\n    return chapterResponse.data.data;\r\n  } catch (error) {\r\n    console.error('Error fetching chapter content:', error);\r\n    return null;\r\n  }\r\n};\r\n"],"names":[],"mappings":";;;;AACA;AADA;;;AA2CO,MAAM,mBAAmB,OAAO;IACrC,IAAI;QACF,yBAAyB;QACzB,MAAM,eAAe,MAAM,uLAAA,CAAA,UAAK,CAAC,GAAG,CAA2B,GAAG,sHAAA,CAAA,YAAS,CAAC,OAAO,EAAE,IAAI;QACzF,MAAM,cAAc,aAAa,IAAI,CAAC,IAAI;QAE1C,kCAAkC;QAClC,MAAM,mBAAmB,MAAM,uLAAA,CAAA,UAAK,CAAC,GAAG,CAAyB,GAAG,sHAAA,CAAA,YAAS,CAAC,OAAO,EAAE,GAAG,SAAS,CAAC;QACpG,MAAM,WAAW,iBAAiB,IAAI,CAAC,IAAI;QAE3C,yCAAyC;QACzC,OAAO;YAAE,GAAG,WAAW;YAAE;QAAS;IACpC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,gCAAgC;QAC9C,OAAO;IACT;AACF;AAGO,MAAM,sBAAsB,OAAO,QAAgB;IACxD,IAAI;QACF,0CAA0C;QAC1C,MAAM,kBAAkB,MAAM,uLAAA,CAAA,UAAK,CAAC,GAAG,CAAuB,GAAG,sHAAA,CAAA,YAAS,CAAC,OAAO,EAAE,OAAO,UAAU,EAAE,WAAW;QAClH,OAAO,gBAAgB,IAAI,CAAC,IAAI;IAClC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO;IACT;AACF"}},
    {"offset": {"line": 203, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/abbes/Desktop/ADN_Experise_Technical_Interview/waialys-technical-test-harry-potter/src/app/books/%5Bid%5D/page.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\r\nimport { BookDetails, fetchBookDetails, Chapter } from \"@/app/models/bookDetails\";\r\nimport axios from \"axios\";\r\nimport { BASE_PATH } from \"@/consts\";\r\n\r\nexport default function BookDetailsPage() {\r\n  const params = useParams();\r\n  const { id } = params;\r\n\r\n  const [book, setBook] = useState<BookDetails | null>(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [chapterSummaries, setChapterSummaries] = useState<Record<string, string>>({}); // Store summaries by chapter ID\r\n  const [loadingChapter, setLoadingChapter] = useState<string | null>(null); // Track loading state per chapter\r\n\r\n  const accordionRef = useRef<any>(null); // Ref to track the Accordion if needed\r\n\r\n  useEffect(() => {\r\n    const getBookDetails = async () => {\r\n      if (typeof id === \"string\") {\r\n        const details = await fetchBookDetails(id);\r\n        setBook(details);\r\n        setLoading(false);\r\n      }\r\n    };\r\n    getBookDetails();\r\n  }, [id]);\r\n\r\n  const fetchChapterSummary = async (chapterId: string) => {\r\n    setLoadingChapter(chapterId); // Set loading for this specific chapter\r\n    try {\r\n      const response = await axios.get(`${BASE_PATH}/v1/books/${id}/chapters/${chapterId}`);\r\n      setChapterSummaries((prevState) => ({\r\n        ...prevState,\r\n        [chapterId]: response.data.data.attributes.summary || \"No summary available\",\r\n      }));\r\n    } catch (error) {\r\n      setChapterSummaries((prevState) => ({\r\n        ...prevState,\r\n        [chapterId]: \"Failed to load chapter summary\",\r\n      }));\r\n    } finally {\r\n      setLoadingChapter(null); // Reset loading state\r\n    }\r\n  };\r\n\r\n  const handleChapterClick = (chapterId: string) => {\r\n    if (!chapterSummaries[chapterId]) {\r\n      fetchChapterSummary(chapterId);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-black text-white p-8\">\r\n        <div className=\"max-w-6xl mx-auto\">\r\n          <div className=\"animate-pulse\">\r\n            <div className=\"h-8 bg-gray-700 w-1/3 mb-4 rounded\"></div>\r\n            <div className=\"h-4 bg-gray-700 w-1/4 mb-8 rounded\"></div>\r\n            <div className=\"h-40 bg-gray-700 w-full rounded\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!book) {\r\n    return (\r\n      <div className=\"min-h-screen bg-black text-white p-8\">\r\n        <div className=\"max-w-6xl mx-auto\">\r\n          <p className=\"text-red-500\">Book not found</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-black text-white p-8\">\r\n      <div className=\"max-w-6xl mx-auto\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-[400px,1fr] gap-8\">\r\n          <div>\r\n            <img\r\n              src={book.attributes.cover}\r\n              alt={book.attributes.title}\r\n              className=\"w-full h-auto rounded-lg\"\r\n            />\r\n          </div>\r\n          <div>\r\n            <h1 className=\"text-3xl font-bold mb-2\">{book.attributes.title}</h1>\r\n            <p className=\"text-xl text-gray-400 mb-4\">{book.attributes.author}</p>\r\n            <div className=\"flex gap-8 text-gray-400 mb-6\">\r\n              <p>Pages: {book.attributes.pages}</p>\r\n              <p>Released: {book.attributes.release_date}</p>\r\n            </div>\r\n            <p className=\"text-gray-300 mb-8\">{book.attributes.summary}</p>\r\n\r\n            <div className=\"mt-8\">\r\n              <h2 className=\"text-2xl mb-4\">Chapters</h2>\r\n              <div className=\"space-y-2\">\r\n                <Accordion type=\"single\" collapsible className=\"border-b border-gray-800\" ref={accordionRef}>\r\n                  {book.chapters && book.chapters.length > 0 ? (\r\n                    book.chapters.map((chapter, index) => (\r\n                      <AccordionItem\r\n                        key={chapter.id}\r\n                        value={chapter.id.toString()}\r\n                        className={!chapter.attributes.summary ? \"opacity-50\" : \"\"}\r\n                      >\r\n                        <AccordionTrigger\r\n                          disabled={!chapter.attributes.summary}\r\n                          className=\"hover:no-underline py-4 text-left\"\r\n                          onClick={() => handleChapterClick(chapter.id.toString())}\r\n                        >\r\n                          <span className=\"flex items-center text-gray-300\">\r\n                            Chapter {index + 1}: {chapter.attributes.title}\r\n                          </span>\r\n                        </AccordionTrigger>\r\n                        <AccordionContent className=\"text-gray-400 pb-4\">\r\n                          {loadingChapter === chapter.id ? (\r\n                            <p>Loading summary...</p>\r\n                          ) : (\r\n                            chapterSummaries[chapter.id] || \"No summary available\"\r\n                          )}\r\n                        </AccordionContent>\r\n                      </AccordionItem>\r\n                    ))\r\n                  ) : (\r\n                    <p>No chapters available</p>\r\n                  )}\r\n                </Accordion>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 525, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 536, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}